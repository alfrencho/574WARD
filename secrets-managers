require('dotenv').config();

const { Octokit } = require("@octokit/rest");
const octokit = new Octokit();

async function getSecret(secretName) {
  const result = await octokit.actions.getSecret({
    owner: process.env.GITHUB_REPOSITORY_OWNER,
    repo: process.env.GITHUB_REPOSITORY_NAME,
    name: secretName
  });
  return result.data.value;
}

async function main() {
  const apiKey = await getSecret("OPENAI_API_KEY");

  console.log(`Your OpenAI API key is: ${apiKey}`);
}

main().catch(error => {
  console.error(error);
});
